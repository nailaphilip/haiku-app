(()=>{var e={};e.id=626,e.ids=[626],e.modules={67096:e=>{"use strict";e.exports=require("bcrypt")},38013:e=>{"use strict";e.exports=require("mongodb")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},76162:e=>{"use strict";e.exports=require("stream")},21764:e=>{"use strict";e.exports=require("util")},78993:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),r(37163),r(30179),r(35866);var t=r(23191),a=r(88716),n=r(37922),i=r.n(n),o=r(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(s,l);let c=["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,37163)),"/Users/nailyaphilippova/Documents/Coding/our haiku app/app/login/page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,30179)),"/Users/nailyaphilippova/Documents/Coding/our haiku app/app/layout.jsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/nailyaphilippova/Documents/Coding/our haiku app/app/login/page.jsx"],u="/login/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},96656:(e,s,r)=>{let t={"1c8a6bac3575984d7ef5b2e1c7713f693d58f1ac":()=>Promise.resolve().then(r.bind(r,54324)).then(e=>e.logout),"9b9698ee934e40e96ed63433d63ff5109d380dd1":()=>Promise.resolve().then(r.bind(r,54324)).then(e=>e.login),b76cf3606bca35304ca86a56d4e3da65811e8794:()=>Promise.resolve().then(r.bind(r,54324)).then(e=>e.register)};async function a(e,...s){return(await t[e]()).apply(null,s)}e.exports={"1c8a6bac3575984d7ef5b2e1c7713f693d58f1ac":a.bind(null,"1c8a6bac3575984d7ef5b2e1c7713f693d58f1ac"),"9b9698ee934e40e96ed63433d63ff5109d380dd1":a.bind(null,"9b9698ee934e40e96ed63433d63ff5109d380dd1"),b76cf3606bca35304ca86a56d4e3da65811e8794:a.bind(null,"b76cf3606bca35304ca86a56d4e3da65811e8794")}},924:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,79404,23))},20675:(e,s,r)=>{Promise.resolve().then(r.bind(r,98449))},17817:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,12994,23)),Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23))},32329:(e,s,r)=>{"use strict";r.d(s,{x4:()=>n,z2:()=>a}),r(15424);var t=r(46242),a=(0,t.$)("b76cf3606bca35304ca86a56d4e3da65811e8794"),n=(0,t.$)("9b9698ee934e40e96ed63433d63ff5109d380dd1");(0,t.$)("1c8a6bac3575984d7ef5b2e1c7713f693d58f1ac")},98449:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>i});var t=r(10326),a=r(60962),n=r(32329);function i(){let[e,s]=(0,a.useFormState)(n.x4,{});return(0,t.jsxs)(t.Fragment,{children:[t.jsx("h2",{className:"text-center text-2xl text-gray-600 mb-5",children:"Log In"}),(0,t.jsxs)("form",{action:s,className:"max-w-xs mx-auto",children:[(0,t.jsxs)("div",{className:"mb-3",children:[t.jsx("input",{name:"username",autoComplete:"off",type:"text",placeholder:"Username",className:"input input-bordered w-full max-w-xs"}),!1==e.success&&(0,t.jsxs)("div",{role:"alert",className:"alert alert-warning",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 shrink-0 stroke-current",fill:"none",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),t.jsx("span",{children:e.message})]})]}),t.jsx("div",{className:"mb-3",children:t.jsx("input",{name:"password",autoComplete:"off",type:"password",placeholder:"password",className:"input input-bordered w-full max-w-xs"})}),t.jsx("button",{className:"btn btn-primary",children:"Submit"})]})]})}},46242:(e,s,r)=>{"use strict";Object.defineProperty(s,"$",{enumerable:!0,get:function(){return a}});let t=r(15424);function a(e){let{createServerReference:s}=r(56493);return s(e,t.callServer)}},54324:(e,s,r)=>{"use strict";r.r(s),r.d(s,{login:()=>p,logout:()=>m,register:()=>h});var t=r(24330);r(60166);var a=r(84191),n=r(67096),i=r.n(n),o=r(71615),l=r(41482),c=r.n(l),d=r(58585),u=r(40618);let p=async function(e,s){let r={username:s.get("username"),password:s.get("password")};"string"!=typeof r.username&&(r.username=""),"string"!=typeof r.password&&(r.password="");let t=await (0,a._)("users"),n=await t.findOne({username:r.username});if(!n||!i().compareSync(r.password,n.password))return{success:!1,message:"Invalid username / password."};let l=c().sign({skyColor:"blue",userId:n._id.toString(),exp:Math.floor(Date.now()/1e3)+86400},process.env.JWTSECRET);return(0,o.cookies)().set("ourhaikuapp",l,{httpOnly:!0,sameSite:"strict",maxAge:86400,secure:!0}),(0,d.redirect)("/")},m=async function(){(0,o.cookies)().delete("ourhaikuapp"),(0,d.redirect)("/")},h=async function(e,s){var r;let t={},n={username:s.get("username"),password:s.get("password")};"string"!=typeof n.username&&(n.username=""),"string"!=typeof n.password&&(n.password=""),n.username=n.username.trim(),n.password=n.password.trim(),n.username.length<3&&(t.username="Username must be at least 3 characters."),n.username.length>30&&(t.username="Username cannot exceed 30 characters."),r=n.username,/^[a-zA-Z0-9]*$/.test(r)||(t.username="Usernames can only contain letters and numbers."),""==n.username&&(t.username="You must provide a username.");let l=await (0,a._)("users");if(await l.findOne({username:n.username})&&(t.username="That username is already in use."),n.password.length<12&&(t.password="Password must be at least 12 characters."),n.password.length>50&&(t.password="Password cannot exceed 50 characters."),""==n.password&&(t.password="You must provide a password."),t.username||t.password)return{errors:t,success:!1};let d=i().genSaltSync(10);n.password=i().hashSync(n.password,d);let u=(await l.insertOne(n)).insertedId.toString(),p=c().sign({skyColor:"blue",userId:u,exp:Math.floor(Date.now()/1e3)+86400},process.env.JWTSECRET);return(0,o.cookies)().set("ourhaikuapp",p,{httpOnly:!0,sameSite:"strict",maxAge:86400,secure:!0}),{success:!0}};(0,u.h)([p,m,h]),(0,t.j)("9b9698ee934e40e96ed63433d63ff5109d380dd1",p),(0,t.j)("1c8a6bac3575984d7ef5b2e1c7713f693d58f1ac",m),(0,t.j)("b76cf3606bca35304ca86a56d4e3da65811e8794",h)},30179:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>c,metadata:()=>l});var t=r(19510),a=r(57371),n=r(85723),i=r(54324);async function o(){let e=await (0,n.Z)();return t.jsx("header",{className:"bg-gray-100 shadow-md",children:t.jsx("div",{className:"container mx-auto",children:(0,t.jsxs)("div",{className:"navbar",children:[t.jsx("div",{className:"flex-1",children:t.jsx(a.default,{href:"/",className:"btn btn-ghost text-xl",children:"HaikuApp"})}),t.jsx("div",{className:"flex-none",children:(0,t.jsxs)("ul",{className:"menu menu-horizontal px-1",children:[e&&(0,t.jsxs)(t.Fragment,{children:[t.jsx("li",{className:"mr-3",children:t.jsx(a.default,{href:"/create-haiku",className:"btn btn-primary",children:"Create Haiku"})}),t.jsx("li",{children:t.jsx("form",{action:i.logout,className:"btn btn-neutral",children:t.jsx("button",{children:"Log Out"})})})]}),!e&&t.jsx("li",{children:t.jsx(a.default,{href:"/login",children:"Log In"})})]})})]})})})}r(32136);let l={title:"Next.js",description:"Generated by Next.js"};function c({children:e}){return t.jsx("html",{lang:"en",children:(0,t.jsxs)("body",{children:[t.jsx(o,{}),t.jsx("main",{className:"container mx-auto p-10",children:e}),t.jsx("footer",{className:"text-gray-400 text-center text-xs py-5",children:(0,t.jsxs)("p",{children:["Copyright \xa9 ",new Date().getFullYear()," - All right reserved."]})})]})})}},37163:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(68570).createProxy)(String.raw`/Users/nailyaphilippova/Documents/Coding/our haiku app/app/login/page.jsx#default`)},84191:(e,s,r)=>{"use strict";let t;r.d(s,{_:()=>o});var a=r(38013);if(!process.env.CONNECTIONSTRING)throw Error("Please add your MongoDB URI to the .env file");let n=process.env.CONNECTIONSTRING;async function i(){return(await t).db()}async function o(e){return(await i()).collection(e)}t=new a.MongoClient(n,{}).connect()},85723:(e,s,r)=>{"use strict";r.d(s,{Z:()=>i});var t=r(41482),a=r.n(t),n=r(71615);async function i(){let e=n.cookies().get("ourhaikuapp")?.value;if(e)try{return a().verify(e,process.env.JWTSECRET)}catch(e){return null}}},32136:()=>{}};var s=require("../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[574,543],()=>r(78993));module.exports=t})();