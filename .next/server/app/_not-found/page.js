(()=>{var e={};e.id=409,e.ids=[409],e.modules={67096:e=>{"use strict";e.exports=require("bcrypt")},38013:e=>{"use strict";e.exports=require("mongodb")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},76162:e=>{"use strict";e.exports=require("stream")},21764:e=>{"use strict";e.exports=require("util")},5972:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>c,pages:()=>l,routeModule:()=>m,tree:()=>u}),t(7352),t(35866),t(30179);var s=t(23191),n=t(88716),a=t(37922),o=t.n(a),i=t(95231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(r,d);let u=["",{children:["/_not-found",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,30179)),"/Users/nailyaphilippova/Documents/Coding/our haiku app/app/layout.jsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],l=[],c="/_not-found/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/_not-found/page",pathname:"/_not-found",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},96656:(e,r,t)=>{let s={"1c8a6bac3575984d7ef5b2e1c7713f693d58f1ac":()=>Promise.resolve().then(t.bind(t,54324)).then(e=>e.logout),"9b9698ee934e40e96ed63433d63ff5109d380dd1":()=>Promise.resolve().then(t.bind(t,54324)).then(e=>e.login),b76cf3606bca35304ca86a56d4e3da65811e8794:()=>Promise.resolve().then(t.bind(t,54324)).then(e=>e.register)};async function n(e,...r){return(await s[e]()).apply(null,r)}e.exports={"1c8a6bac3575984d7ef5b2e1c7713f693d58f1ac":n.bind(null,"1c8a6bac3575984d7ef5b2e1c7713f693d58f1ac"),"9b9698ee934e40e96ed63433d63ff5109d380dd1":n.bind(null,"9b9698ee934e40e96ed63433d63ff5109d380dd1"),b76cf3606bca35304ca86a56d4e3da65811e8794:n.bind(null,"b76cf3606bca35304ca86a56d4e3da65811e8794")}},924:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,79404,23))},17817:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,12994,23)),Promise.resolve().then(t.t.bind(t,96114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,79671,23)),Promise.resolve().then(t.t.bind(t,41868,23)),Promise.resolve().then(t.t.bind(t,84759,23))},54324:(e,r,t)=>{"use strict";t.r(r),t.d(r,{login:()=>p,logout:()=>m,register:()=>f});var s=t(24330);t(60166);var n=t(84191),a=t(67096),o=t.n(a),i=t(71615),d=t(41482),u=t.n(d),l=t(58585),c=t(40618);let p=async function(e,r){let t={username:r.get("username"),password:r.get("password")};"string"!=typeof t.username&&(t.username=""),"string"!=typeof t.password&&(t.password="");let s=await (0,n._)("users"),a=await s.findOne({username:t.username});if(!a||!o().compareSync(t.password,a.password))return{success:!1,message:"Invalid username / password."};let d=u().sign({skyColor:"blue",userId:a._id.toString(),exp:Math.floor(Date.now()/1e3)+86400},process.env.JWTSECRET);return(0,i.cookies)().set("ourhaikuapp",d,{httpOnly:!0,sameSite:"strict",maxAge:86400,secure:!0}),(0,l.redirect)("/")},m=async function(){(0,i.cookies)().delete("ourhaikuapp"),(0,l.redirect)("/")},f=async function(e,r){var t;let s={},a={username:r.get("username"),password:r.get("password")};"string"!=typeof a.username&&(a.username=""),"string"!=typeof a.password&&(a.password=""),a.username=a.username.trim(),a.password=a.password.trim(),a.username.length<3&&(s.username="Username must be at least 3 characters."),a.username.length>30&&(s.username="Username cannot exceed 30 characters."),t=a.username,/^[a-zA-Z0-9]*$/.test(t)||(s.username="Usernames can only contain letters and numbers."),""==a.username&&(s.username="You must provide a username.");let d=await (0,n._)("users");if(await d.findOne({username:a.username})&&(s.username="That username is already in use."),a.password.length<12&&(s.password="Password must be at least 12 characters."),a.password.length>50&&(s.password="Password cannot exceed 50 characters."),""==a.password&&(s.password="You must provide a password."),s.username||s.password)return{errors:s,success:!1};let l=o().genSaltSync(10);a.password=o().hashSync(a.password,l);let c=(await d.insertOne(a)).insertedId.toString(),p=u().sign({skyColor:"blue",userId:c,exp:Math.floor(Date.now()/1e3)+86400},process.env.JWTSECRET);return(0,i.cookies)().set("ourhaikuapp",p,{httpOnly:!0,sameSite:"strict",maxAge:86400,secure:!0}),{success:!0}};(0,c.h)([p,m,f]),(0,s.j)("9b9698ee934e40e96ed63433d63ff5109d380dd1",p),(0,s.j)("1c8a6bac3575984d7ef5b2e1c7713f693d58f1ac",m),(0,s.j)("b76cf3606bca35304ca86a56d4e3da65811e8794",f)},30179:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>u,metadata:()=>d});var s=t(19510),n=t(57371),a=t(85723),o=t(54324);async function i(){let e=await (0,a.Z)();return s.jsx("header",{className:"bg-gray-100 shadow-md",children:s.jsx("div",{className:"container mx-auto",children:(0,s.jsxs)("div",{className:"navbar",children:[s.jsx("div",{className:"flex-1",children:s.jsx(n.default,{href:"/",className:"btn btn-ghost text-xl",children:"HaikuApp"})}),s.jsx("div",{className:"flex-none",children:(0,s.jsxs)("ul",{className:"menu menu-horizontal px-1",children:[e&&(0,s.jsxs)(s.Fragment,{children:[s.jsx("li",{className:"mr-3",children:s.jsx(n.default,{href:"/create-haiku",className:"btn btn-primary",children:"Create Haiku"})}),s.jsx("li",{children:s.jsx("form",{action:o.logout,className:"btn btn-neutral",children:s.jsx("button",{children:"Log Out"})})})]}),!e&&s.jsx("li",{children:s.jsx(n.default,{href:"/login",children:"Log In"})})]})})]})})})}t(32136);let d={title:"Next.js",description:"Generated by Next.js"};function u({children:e}){return s.jsx("html",{lang:"en",children:(0,s.jsxs)("body",{children:[s.jsx(i,{}),s.jsx("main",{className:"container mx-auto p-10",children:e}),s.jsx("footer",{className:"text-gray-400 text-center text-xs py-5",children:(0,s.jsxs)("p",{children:["Copyright \xa9 ",new Date().getFullYear()," - All right reserved."]})})]})})}},84191:(e,r,t)=>{"use strict";let s;t.d(r,{_:()=>i});var n=t(38013);if(!process.env.CONNECTIONSTRING)throw Error("Please add your MongoDB URI to the .env file");let a=process.env.CONNECTIONSTRING;async function o(){return(await s).db()}async function i(e){return(await o()).collection(e)}s=new n.MongoClient(a,{}).connect()},85723:(e,r,t)=>{"use strict";t.d(r,{Z:()=>o});var s=t(41482),n=t.n(s),a=t(71615);async function o(){let e=a.cookies().get("ourhaikuapp")?.value;if(e)try{return n().verify(e,process.env.JWTSECRET)}catch(e){return null}}},7352:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{PARALLEL_ROUTE_DEFAULT_PATH:function(){return n},default:function(){return a}});let s=t(16399),n="next/dist/client/components/parallel-route-default.js";function a(){(0,s.notFound)()}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),e.exports=r.default)},32136:()=>{}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[574,543],()=>t(5972));module.exports=s})();